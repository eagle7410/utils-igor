{"version":3,"sources":["_mocha"],"names":[],"mappings":"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","file":"_mocha-compiled.js","sourcesContent":["\n\n/* eslint no-unused-vars: off */\n\n/**\n * Module dependencies.\n */\n\nvar program = require('commander');\nvar path = require('path');\nvar fs = require('fs');\nvar resolve = path.resolve;\nvar exists = fs.existsSync || path.existsSync;\nvar Mocha = require('../');\nvar utils = Mocha.utils;\nvar interfaceNames = Object.keys(Mocha.interfaces);\nvar join = path.join;\nvar cwd = process.cwd();\nvar getOptions = require('./options');\nvar mocha = new Mocha();\n\n/**\n * Save timer references to avoid Sinon interfering (see GH-237).\n */\n\nvar Date = global.Date;\nvar setTimeout = global.setTimeout;\nvar setInterval = global.setInterval;\nvar clearTimeout = global.clearTimeout;\nvar clearInterval = global.clearInterval;\n\n/**\n * Files.\n */\n\nvar files = [];\n\n/**\n * Globals.\n */\n\nvar globals = [];\n\n/**\n * Requires.\n */\n\nvar requires = [];\n\n/**\n * Images.\n */\n\nvar images = {\n  fail: path.join(__dirname, '..', 'images', 'error.png'),\n  pass: path.join(__dirname, '..', 'images', 'ok.png')\n};\n\n// options\n\nprogram\n  .version(JSON.parse(fs.readFileSync(path.join(__dirname, '..', 'package.json'), 'utf8')).version)\n  .usage('[debug] [options] [files]')\n  .option('-A, --async-only', 'force all tests to take a callback (async) or return a promise')\n  .option('-c, --colors', 'force enabling of colors')\n  .option('-C, --no-colors', 'force disabling of colors')\n  .option('-G, --growl', 'enable growl notification support')\n  .option('-O, --reporter-options <k=v,k2=v2,...>', 'reporter-specific options')\n  .option('-R, --reporter <name>', 'specify the reporter to use', 'spec')\n  .option('-S, --sort', 'sort test files')\n  .option('-b, --bail', 'bail after first test failure')\n  .option('-d, --debug', \"enable node's debugger, synonym for node --debug\")\n  .option('-g, --grep <pattern>', 'only run tests matching <pattern>')\n  .option('-f, --fgrep <string>', 'only run tests containing <string>')\n  .option('-gc, --expose-gc', 'expose gc extension')\n  .option('-i, --invert', 'inverts --grep and --fgrep matches')\n  .option('-r, --require <name>', 'require the given module')\n  .option('-s, --slow <ms>', '\"slow\" test threshold in milliseconds [75]')\n  .option('-t, --timeout <ms>', 'set test-case timeout in milliseconds [2000]')\n  .option('-u, --ui <name>', 'specify user-interface (' + interfaceNames.join('|') + ')', 'bdd')\n  .option('-w, --watch', 'watch files for changes')\n  .option('--check-leaks', 'check for global variable leaks')\n  .option('--full-trace', 'display the full stack trace')\n  .option('--compilers <ext>:<module>,...', 'use the given module(s) to compile files', list, [])\n  .option('--debug-brk', \"enable node's debugger breaking on the first line\")\n  .option('--globals <names>', 'allow the given comma-delimited global [names]', list, [])\n  .option('--es_staging', 'enable all staged features')\n  .option('--harmony<_classes,_generators,...>', 'all node --harmony* flags are available')\n  .option('--preserve-symlinks', 'Instructs the module loader to preserve symbolic links when resolving and caching modules')\n  .option('--icu-data-dir', 'include ICU data')\n  .option('--inline-diffs', 'display actual/expected differences inline within each string')\n  .option('--interfaces', 'display available interfaces')\n  .option('--no-deprecation', 'silence deprecation warnings')\n  .option('--no-exit', 'require a clean shutdown of the event loop: mocha will not call process.exit')\n  .option('--no-timeouts', 'disables timeouts, given implicitly with --debug')\n  .option('--opts <path>', 'specify opts path', 'test/mocha.opts')\n  .option('--perf-basic-prof', 'enable perf linux profiler (basic support)')\n  .option('--prof', 'log statistical profiling information')\n  .option('--log-timer-events', 'Time events including external callbacks')\n  .option('--recursive', 'include sub directories')\n  .option('--reporters', 'display available reporters')\n  .option('--retries <times>', 'set numbers of time to retry a failed test case')\n  .option('--throw-deprecation', 'throw an exception anytime a deprecated function is used')\n  .option('--trace', 'trace function calls')\n  .option('--trace-deprecation', 'show stack traces on deprecations')\n  .option('--use_strict', 'enforce strict mode')\n  .option('--watch-extensions <ext>,...', 'additional extensions to monitor with --watch', list, [])\n  .option('--delay', 'wait for async suite definition');\n\nprogram._name = 'mocha';\n\n// init command\n\nprogram\n  .command('init <path>')\n  .description('initialize a client-side mocha setup at <path>')\n  .action(function(path) {\n    var mkdir = require('mkdirp');\n    mkdir.sync(path);\n    var css = fs.readFileSync(join(__dirname, '..', 'mocha.css'));\n    var js = fs.readFileSync(join(__dirname, '..', 'mocha.js'));\n    var tmpl = fs.readFileSync(join(__dirname, '..', 'lib/template.html'));\n    fs.writeFileSync(join(path, 'mocha.css'), css);\n    fs.writeFileSync(join(path, 'mocha.js'), js);\n    fs.writeFileSync(join(path, 'tests.js'), '');\n    fs.writeFileSync(join(path, 'index.html'), tmpl);\n    process.exit(0);\n  });\n\n// --globals\n\nprogram.on('globals', function(val) {\n  globals = globals.concat(list(val));\n});\n\n// --reporters\n\nprogram.on('reporters', function() {\n  console.log();\n  console.log('    dot - dot matrix');\n  console.log('    doc - html documentation');\n  console.log('    spec - hierarchical spec list');\n  console.log('    json - single json object');\n  console.log('    progress - progress bar');\n  console.log('    list - spec-style listing');\n  console.log('    tap - test-anything-protocol');\n  console.log('    landing - unicode landing strip');\n  console.log('    xunit - xunit reporter');\n  console.log('    min - minimal reporter (great with --watch)');\n  console.log('    json-stream - newline delimited json events');\n  console.log('    markdown - markdown documentation (github flavour)');\n  console.log('    nyan - nyan cat!');\n  console.log();\n  process.exit();\n});\n\n// --interfaces\n\nprogram.on('interfaces', function() {\n  console.log('');\n  interfaceNames.forEach(function(interfaceName) {\n    console.log('    ' + interfaceName);\n  });\n  console.log('');\n  process.exit();\n});\n\n// -r, --require\n\nmodule.paths.push(cwd, join(cwd, 'node_modules'));\n\nprogram.on('require', function(mod) {\n  var abs = exists(mod) || exists(mod + '.js');\n  if (abs) {\n    mod = resolve(mod);\n  }\n  requires.push(mod);\n});\n\n// If not already done, load mocha.opts\nif (!process.env.LOADED_MOCHA_OPTS) {\n  getOptions();\n}\n\n// parse args\n\nprogram.parse(process.argv);\n\n// infinite stack traces\n\nError.stackTraceLimit = Infinity; // TODO: config\n\n// reporter options\n\nvar reporterOptions = {};\nif (program.reporterOptions !== undefined) {\n  program.reporterOptions.split(',').forEach(function(opt) {\n    var L = opt.split('=');\n    if (L.length > 2 || L.length === 0) {\n      throw new Error(\"invalid reporter option '\" + opt + \"'\");\n    } else if (L.length === 2) {\n      reporterOptions[L[0]] = L[1];\n    } else {\n      reporterOptions[L[0]] = true;\n    }\n  });\n}\n\n// reporter\n\nmocha.reporter(program.reporter, reporterOptions);\n\n// load reporter\n\nvar Reporter = null;\ntry {\n  Reporter = require('../lib/reporters/' + program.reporter);\n} catch (err) {\n  try {\n    Reporter = require(program.reporter);\n  } catch (err2) {\n    throw new Error('reporter \"' + program.reporter + '\" does not exist');\n  }\n}\n\n// --no-colors\n\nif (!program.colors) {\n  mocha.useColors(false);\n}\n\n// --colors\n\nif (~process.argv.indexOf('--colors') || ~process.argv.indexOf('-c')) {\n  mocha.useColors(true);\n}\n\n// --inline-diffs\n\nif (program.inlineDiffs) {\n  mocha.useInlineDiffs(true);\n}\n\n// --slow <ms>\n\nif (program.slow) {\n  mocha.suite.slow(program.slow);\n}\n\n// --no-timeouts\n\nif (!program.timeouts) {\n  mocha.enableTimeouts(false);\n}\n\n// --timeout\n\nif (program.timeout) {\n  mocha.suite.timeout(program.timeout);\n}\n\n// --bail\n\nmocha.suite.bail(program.bail);\n\n// --grep\n\nif (program.grep) {\n  mocha.grep(program.grep);\n}\n\n// --fgrep\n\nif (program.fgrep) {\n  mocha.fgrep(program.fgrep);\n}\n\n// --invert\n\nif (program.invert) {\n  mocha.invert();\n}\n\n// --check-leaks\n\nif (program.checkLeaks) {\n  mocha.checkLeaks();\n}\n\n// --stack-trace\n\nif (program.fullTrace) {\n  mocha.fullTrace();\n}\n\n// --growl\n\nif (program.growl) {\n  mocha.growl();\n}\n\n// --async-only\n\nif (program.asyncOnly) {\n  mocha.asyncOnly();\n}\n\n// --delay\n\nif (program.delay) {\n  mocha.delay();\n}\n\n// --globals\n\nmocha.globals(globals);\n\n// --retries\n\nif (program.retries) {\n  mocha.suite.retries(program.retries);\n}\n\n// custom compiler support\n\nvar extensions = ['js'];\nprogram.compilers.forEach(function(c) {\n  var idx = c.indexOf(':');\n  var ext = c.slice(0, idx);\n  var mod = c.slice(idx + 1);\n\n  if (mod[0] === '.') {\n    mod = join(process.cwd(), mod);\n  }\n  require(mod);\n  extensions.push(ext);\n  program.watchExtensions.push(ext);\n});\n\n// requires\n\nrequires.forEach(function(mod) {\n  require(mod);\n});\n\n// interface\n\nmocha.ui(program.ui);\n\n// args\n\nvar args = program.args;\n\n// default files to test/*.{js,coffee}\n\nif (!args.length) {\n  args.push('test');\n}\n\nargs.forEach(function(arg) {\n  var newFiles;\n  try {\n    newFiles = utils.lookupFiles(arg, extensions, program.recursive);\n  } catch (err) {\n    if (err.message.indexOf('cannot resolve path') === 0) {\n      console.error('Warning: Could not find any test files matching pattern: ' + arg);\n      return;\n    }\n\n    throw err;\n  }\n\n  files = files.concat(newFiles);\n});\n\nif (!files.length) {\n  console.error('No test files found');\n  process.exit(1);\n}\n\n// resolve\n\nfiles = files.map(function(path) {\n  return resolve(path);\n});\n\nif (program.sort) {\n  files.sort();\n}\n\n// --watch\n\nvar runner;\nvar loadAndRun;\nvar purge;\nvar rerun;\n\nif (program.watch) {\n  console.log();\n  hideCursor();\n  process.on('SIGINT', function() {\n    showCursor();\n    console.log('\\n');\n    process.exit(130);\n  });\n\n  var watchFiles = utils.files(cwd, [ 'js' ].concat(program.watchExtensions));\n  var runAgain = false;\n\n  loadAndRun = function loadAndRun() {\n    try {\n      mocha.files = files;\n      runAgain = false;\n      runner = mocha.run(function() {\n        runner = null;\n        if (runAgain) {\n          rerun();\n        }\n      });\n    } catch (e) {\n      console.log(e.stack);\n    }\n  };\n\n  purge = function purge() {\n    watchFiles.forEach(function(file) {\n      delete require.cache[file];\n    });\n  };\n\n  loadAndRun();\n\n  rerun = function rerun() {\n    purge();\n    stop();\n    if (!program.grep) {\n      mocha.grep(null);\n    }\n    mocha.suite = mocha.suite.clone();\n    mocha.suite.ctx = new Mocha.Context();\n    mocha.ui(program.ui);\n    loadAndRun();\n  };\n\n  utils.watch(watchFiles, function() {\n    runAgain = true;\n    if (runner) {\n      runner.abort();\n    } else {\n      rerun();\n    }\n  });\n} else {\n// load\n\n  mocha.files = files;\n  runner = mocha.run(program.exit ? exit : exitLater);\n}\n\nfunction exitLater(code) {\n  process.on('exit', function() {\n    process.exit(Math.min(code, 255));\n  });\n}\n\nfunction exit(code) {\n  // flush output for Node.js Windows pipe bug\n  // https://github.com/joyent/node/issues/6247 is just one bug example\n  // https://github.com/visionmedia/mocha/issues/333 has a good discussion\n  function done() {\n    if (!(draining--)) {\n      process.exit(Math.min(code, 255));\n    }\n  }\n\n  var draining = 0;\n  var streams = [process.stdout, process.stderr];\n\n  streams.forEach(function(stream) {\n    // submit empty write request and wait for completion\n    draining += 1;\n    stream.write('', done);\n  });\n\n  done();\n}\n\nprocess.on('SIGINT', function() {\n  runner.abort();\n\n  // This is a hack:\n  // Instead of `process.exit(130)`, set runner.failures to 130 (exit code for SIGINT)\n  // The amount of failures will be emitted as error code later\n  runner.failures = 130;\n});\n\n/**\n * Parse list.\n */\n\nfunction list(str) {\n  return str.split(/ *, */);\n}\n\n/**\n * Hide the cursor.\n */\n\nfunction hideCursor() {\n  process.stdout.write('\\u001b[?25l');\n}\n\n/**\n * Show the cursor.\n */\n\nfunction showCursor() {\n  process.stdout.write('\\u001b[?25h');\n}\n\n/**\n * Stop play()ing.\n */\n\nfunction stop() {\n  process.stdout.write('\\u001b[2K');\n  clearInterval(play.timer);\n}\n\n/**\n * Play the given array of strings.\n */\n\nfunction play(arr, interval) {\n  var len = arr.length;\n  interval = interval || 100;\n  var i = 0;\n\n  play.timer = setInterval(function() {\n    var str = arr[i++ % len];\n    process.stdout.write('\\u001b[0G' + str);\n  }, interval);\n}\n"]}