{"version":3,"sources":["fail.js"],"names":[],"mappings":"AAAA;;AAEA,IAAI,QAAQ,QAAQ,UAAR,CAAZ;;AAEA;AACA,IAAI,OAAO,OAAO,OAAP,GAAiB,EAA5B;;AAEA;AACA,KAAK,IAAL,GAAY;AACV,eAAa,CADH;AAEV,qBAAmB,CAFT;AAGV,gBAAc,CAHJ;AAIV,kBAAgB,CAJN;AAKV,wBAAsB,CALZ;AAMV,WAAS;AANC,CAAZ;;AASA;AACA,SAAS,OAAT,CAAiB,CAAjB,EAAoB,IAApB,EAA0B;AACxB,QAAM,GAAN,CAAU,KAAV,GAAkB,KAAlB;AACA,MAAI,MAAM,OAAO,EAAE,OAAF,IAAa,CAApB,CAAV;AACA,MAAI,CAAC,MAAM,MAAN,CAAa,UAAb,CAAL,EAA+B;AAAE,WAAO,MAAP;AAAgB,GAHzB,CAG0B;AAClD,MAAI,SAAS,MAAb,EAAqB;AACnB,UAAM,cAAc,GAAd,GAAoB,GAA1B;AACA,WAAQ,MAAM,MAAN,CAAa,OAAb,IAAwB,4BAA4B,SAApD,GAAgE,0BAAxE;AACA,UAAM,IAAI,MAAV;AACD,GAJD,MAIO;AACL,UAAM,CAAC,kBAAkB,GAAnB,EAAwB,GAA9B;AACD;AACD,QAAM,GAAN,CAAU,OAAV,CAAkB,GAAlB;AACD;;AAED;AACA,SAAS,SAAT,CAAmB,CAAnB,EAAsB;AACpB,MAAI,MAAM,MAAN,CAAa,OAAb,CAAJ,EAA2B;AACzB,QAAI,EAAE,SAAF,IAAe,EAAE,SAAF,CAAY,KAA/B,EAAsC;AACpC,cAAQ,GAAR,CAAY,EAAE,SAAF,CAAY,KAAxB;AACD,KAFD,MAEO,IAAI,EAAE,KAAN,EAAa;AAClB,cAAQ,GAAR,CAAY,EAAE,KAAd;AACD;AACF;AACF;;AAED;AACA,KAAK,KAAL,GAAa,UAAS,CAAT,EAAY,OAAZ,EAAqB;AAChC,UAAQ,CAAR,EAAW,OAAX;AACA,YAAU,CAAV;AACA,QAAM,IAAN,CAAW,IAAX,CAAgB,OAAO,OAAP,KAAmB,QAAnB,GAA8B,OAA9B,GAAwC,KAAK,IAAL,CAAU,WAAlE;AACD,CAJD;;AAMA;AACA,KAAK,UAAL,GAAkB,CAAlB;AACA,KAAK,SAAL,GAAiB,CAAjB;;AAEA;AACA,KAAK,IAAL,GAAY,UAAS,CAAT,EAAY,OAAZ,EAAqB;AAC/B,MAAI,UAAU,OAAO,CAAP,KAAa,QAAb,GAAwB,CAAxB,GAA4B,EAAE,OAA5C;AACA,OAAK,SAAL;AACA,UAAQ,OAAR,EAAiB,MAAjB;AACA;AACA,MAAI,CAAC,MAAM,MAAN,CAAa,OAAb,CAAL,EAA4B;AAC1B,cAAU,CAAV;AACA,UAAM,GAAN,CAAU,OAAV,GAAoB,IAApB,CAAyB,0BAAzB;AACA,UAAM,IAAN,CAAW,IAAX,CAAgB,OAAO,OAAP,KAAmB,QAAnB,GAA8B,OAA9B,GAAwC,KAAK,IAAL,CAAU,OAAlE;AACD;AACF,CAVD;;AAYA;AACA,KAAK,MAAL,GAAc,YAAW;AACvB,MAAI,KAAK,SAAL,GAAiB,CAArB,EAAwB;AACtB,UAAM,GAAN,CAAU,OAAV,GAAoB,IAApB,CAAyB,0BAAzB;AACD,GAFD,MAEO;AACL,UAAM,GAAN,CAAU,OAAV,GAAoB,OAApB,CAA4B,OAA5B;AACD;AACF,CAND","file":"fail-compiled.js","sourcesContent":["'use strict';\n\nvar grunt = require('../grunt');\n\n// The module to be exported.\nvar fail = module.exports = {};\n\n// Error codes.\nfail.code = {\n  FATAL_ERROR: 1,\n  MISSING_GRUNTFILE: 2,\n  TASK_FAILURE: 3,\n  TEMPLATE_ERROR: 4,\n  INVALID_AUTOCOMPLETE: 5,\n  WARNING: 6,\n};\n\n// DRY it up!\nfunction writeln(e, mode) {\n  grunt.log.muted = false;\n  var msg = String(e.message || e);\n  if (!grunt.option('no-color')) { msg += '\\x07'; } // Beep!\n  if (mode === 'warn') {\n    msg = 'Warning: ' + msg + ' ';\n    msg += (grunt.option('force') ? 'Used --force, continuing.'.underline : 'Use --force to continue.');\n    msg = msg.yellow;\n  } else {\n    msg = ('Fatal error: ' + msg).red;\n  }\n  grunt.log.writeln(msg);\n}\n\n// If --stack is enabled, log the appropriate error stack (if it exists).\nfunction dumpStack(e) {\n  if (grunt.option('stack')) {\n    if (e.origError && e.origError.stack) {\n      console.log(e.origError.stack);\n    } else if (e.stack) {\n      console.log(e.stack);\n    }\n  }\n}\n\n// A fatal error occurred. Abort immediately.\nfail.fatal = function(e, errcode) {\n  writeln(e, 'fatal');\n  dumpStack(e);\n  grunt.util.exit(typeof errcode === 'number' ? errcode : fail.code.FATAL_ERROR);\n};\n\n// Keep track of error and warning counts.\nfail.errorcount = 0;\nfail.warncount = 0;\n\n// A warning occurred. Abort immediately unless -f or --force was used.\nfail.warn = function(e, errcode) {\n  var message = typeof e === 'string' ? e : e.message;\n  fail.warncount++;\n  writeln(message, 'warn');\n  // If -f or --force aren't used, stop script processing.\n  if (!grunt.option('force')) {\n    dumpStack(e);\n    grunt.log.writeln().fail('Aborted due to warnings.');\n    grunt.util.exit(typeof errcode === 'number' ? errcode : fail.code.WARNING);\n  }\n};\n\n// This gets called at the very end.\nfail.report = function() {\n  if (fail.warncount > 0) {\n    grunt.log.writeln().fail('Done, but with warnings.');\n  } else {\n    grunt.log.writeln().success('Done.');\n  }\n};\n"]}