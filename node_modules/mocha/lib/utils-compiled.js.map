{"version":3,"sources":["utils.js"],"names":[],"mappings":"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","file":"utils-compiled.js","sourcesContent":["/* eslint-env browser */\n\n/**\n * Module dependencies.\n */\n\nvar JSON = require('json3');\nvar basename = require('path').basename;\nvar debug = require('debug')('mocha:watch');\nvar exists = require('fs').existsSync || require('path').existsSync;\nvar glob = require('glob');\nvar path = require('path');\nvar join = path.join;\nvar readdirSync = require('fs').readdirSync;\nvar statSync = require('fs').statSync;\nvar watchFile = require('fs').watchFile;\nvar toISOString = require('./to-iso-string');\n\n/**\n * Ignored directories.\n */\n\nvar ignore = ['node_modules', '.git'];\n\nexports.inherits = require('util').inherits;\n\n/**\n * Escape special characters in the given string of html.\n *\n * @api private\n * @param  {string} html\n * @return {string}\n */\nexports.escape = function(html) {\n  return String(html)\n    .replace(/&/g, '&amp;')\n    .replace(/\"/g, '&quot;')\n    .replace(/</g, '&lt;')\n    .replace(/>/g, '&gt;');\n};\n\n/**\n * Array#forEach (<=IE8)\n *\n * @api private\n * @param {Array} arr\n * @param {Function} fn\n * @param {Object} scope\n */\nexports.forEach = function(arr, fn, scope) {\n  for (var i = 0, l = arr.length; i < l; i++) {\n    fn.call(scope, arr[i], i);\n  }\n};\n\n/**\n * Test if the given obj is type of string.\n *\n * @api private\n * @param {Object} obj\n * @return {boolean}\n */\nexports.isString = function(obj) {\n  return typeof obj === 'string';\n};\n\n/**\n * Array#map (<=IE8)\n *\n * @api private\n * @param {Array} arr\n * @param {Function} fn\n * @param {Object} scope\n * @return {Array}\n */\nexports.map = function(arr, fn, scope) {\n  var result = [];\n  for (var i = 0, l = arr.length; i < l; i++) {\n    result.push(fn.call(scope, arr[i], i, arr));\n  }\n  return result;\n};\n\n/**\n * Array#indexOf (<=IE8)\n *\n * @api private\n * @param {Array} arr\n * @param {Object} obj to find index of\n * @param {number} start\n * @return {number}\n */\nvar indexOf = exports.indexOf = function(arr, obj, start) {\n  for (var i = start || 0, l = arr.length; i < l; i++) {\n    if (arr[i] === obj) {\n      return i;\n    }\n  }\n  return -1;\n};\n\n/**\n * Array#reduce (<=IE8)\n *\n * @api private\n * @param {Array} arr\n * @param {Function} fn\n * @param {Object} val Initial value.\n * @return {*}\n */\nvar reduce = exports.reduce = function(arr, fn, val) {\n  var rval = val;\n\n  for (var i = 0, l = arr.length; i < l; i++) {\n    rval = fn(rval, arr[i], i, arr);\n  }\n\n  return rval;\n};\n\n/**\n * Array#filter (<=IE8)\n *\n * @api private\n * @param {Array} arr\n * @param {Function} fn\n * @return {Array}\n */\nexports.filter = function(arr, fn) {\n  var ret = [];\n\n  for (var i = 0, l = arr.length; i < l; i++) {\n    var val = arr[i];\n    if (fn(val, i, arr)) {\n      ret.push(val);\n    }\n  }\n\n  return ret;\n};\n\n/**\n * Array#some (<=IE8)\n *\n * @api private\n * @param {Array} arr\n * @param {Function} fn\n * @return {Array}\n */\nexports.some = function(arr, fn) {\n  for (var i = 0, l = arr.length; i < l; i++) {\n    if (fn(arr[i])) {\n      return true;\n    }\n  }\n  return false;\n};\n\n/**\n * Object.keys (<=IE8)\n *\n * @api private\n * @param {Object} obj\n * @return {Array} keys\n */\nexports.keys = typeof Object.keys === 'function' ? Object.keys : function(obj) {\n  var keys = [];\n  var has = Object.prototype.hasOwnProperty; // for `window` on <=IE8\n\n  for (var key in obj) {\n    if (has.call(obj, key)) {\n      keys.push(key);\n    }\n  }\n\n  return keys;\n};\n\n/**\n * Watch the given `files` for changes\n * and invoke `fn(file)` on modification.\n *\n * @api private\n * @param {Array} files\n * @param {Function} fn\n */\nexports.watch = function(files, fn) {\n  var options = { interval: 100 };\n  files.forEach(function(file) {\n    debug('file %s', file);\n    watchFile(file, options, function(curr, prev) {\n      if (prev.mtime < curr.mtime) {\n        fn(file);\n      }\n    });\n  });\n};\n\n/**\n * Array.isArray (<=IE8)\n *\n * @api private\n * @param {Object} obj\n * @return {Boolean}\n */\nvar isArray = typeof Array.isArray === 'function' ? Array.isArray : function(obj) {\n  return Object.prototype.toString.call(obj) === '[object Array]';\n};\n\nexports.isArray = isArray;\n\n/**\n * Buffer.prototype.toJSON polyfill.\n *\n * @type {Function}\n */\nif (typeof Buffer !== 'undefined' && Buffer.prototype) {\n  Buffer.prototype.toJSON = Buffer.prototype.toJSON || function() {\n    return Array.prototype.slice.call(this, 0);\n  };\n}\n\n/**\n * Ignored files.\n *\n * @api private\n * @param {string} path\n * @return {boolean}\n */\nfunction ignored(path) {\n  return !~ignore.indexOf(path);\n}\n\n/**\n * Lookup files in the given `dir`.\n *\n * @api private\n * @param {string} dir\n * @param {string[]} [ext=['.js']]\n * @param {Array} [ret=[]]\n * @return {Array}\n */\nexports.files = function(dir, ext, ret) {\n  ret = ret || [];\n  ext = ext || ['js'];\n\n  var re = new RegExp('\\\\.(' + ext.join('|') + ')$');\n\n  readdirSync(dir)\n    .filter(ignored)\n    .forEach(function(path) {\n      path = join(dir, path);\n      if (statSync(path).isDirectory()) {\n        exports.files(path, ext, ret);\n      } else if (path.match(re)) {\n        ret.push(path);\n      }\n    });\n\n  return ret;\n};\n\n/**\n * Compute a slug from the given `str`.\n *\n * @api private\n * @param {string} str\n * @return {string}\n */\nexports.slug = function(str) {\n  return str\n    .toLowerCase()\n    .replace(/ +/g, '-')\n    .replace(/[^-\\w]/g, '');\n};\n\n/**\n * Strip the function definition from `str`, and re-indent for pre whitespace.\n *\n * @param {string} str\n * @return {string}\n */\nexports.clean = function(str) {\n  str = str\n    .replace(/\\r\\n?|[\\n\\u2028\\u2029]/g, '\\n').replace(/^\\uFEFF/, '')\n    // (traditional)->  space/name     parameters    body     (lambda)-> parameters       body   multi-statement/single          keep body content\n    .replace(/^function(?:\\s*|\\s+[^(]*)\\([^)]*\\)\\s*\\{((?:.|\\n)*?)\\s*\\}$|^\\([^)]*\\)\\s*=>\\s*(?:\\{((?:.|\\n)*?)\\s*\\}|((?:.|\\n)*))$/, '$1$2$3');\n\n  var spaces = str.match(/^\\n?( *)/)[1].length;\n  var tabs = str.match(/^\\n?(\\t*)/)[1].length;\n  var re = new RegExp('^\\n?' + (tabs ? '\\t' : ' ') + '{' + (tabs ? tabs : spaces) + '}', 'gm');\n\n  str = str.replace(re, '');\n\n  return exports.trim(str);\n};\n\n/**\n * Trim the given `str`.\n *\n * @api private\n * @param {string} str\n * @return {string}\n */\nexports.trim = function(str) {\n  return str.replace(/^\\s+|\\s+$/g, '');\n};\n\n/**\n * Parse the given `qs`.\n *\n * @api private\n * @param {string} qs\n * @return {Object}\n */\nexports.parseQuery = function(qs) {\n  return reduce(qs.replace('?', '').split('&'), function(obj, pair) {\n    var i = pair.indexOf('=');\n    var key = pair.slice(0, i);\n    var val = pair.slice(++i);\n\n    obj[key] = decodeURIComponent(val);\n    return obj;\n  }, {});\n};\n\n/**\n * Highlight the given string of `js`.\n *\n * @api private\n * @param {string} js\n * @return {string}\n */\nfunction highlight(js) {\n  return js\n    .replace(/</g, '&lt;')\n    .replace(/>/g, '&gt;')\n    .replace(/\\/\\/(.*)/gm, '<span class=\"comment\">//$1</span>')\n    .replace(/('.*?')/gm, '<span class=\"string\">$1</span>')\n    .replace(/(\\d+\\.\\d+)/gm, '<span class=\"number\">$1</span>')\n    .replace(/(\\d+)/gm, '<span class=\"number\">$1</span>')\n    .replace(/\\bnew[ \\t]+(\\w+)/gm, '<span class=\"keyword\">new</span> <span class=\"init\">$1</span>')\n    .replace(/\\b(function|new|throw|return|var|if|else)\\b/gm, '<span class=\"keyword\">$1</span>');\n}\n\n/**\n * Highlight the contents of tag `name`.\n *\n * @api private\n * @param {string} name\n */\nexports.highlightTags = function(name) {\n  var code = document.getElementById('mocha').getElementsByTagName(name);\n  for (var i = 0, len = code.length; i < len; ++i) {\n    code[i].innerHTML = highlight(code[i].innerHTML);\n  }\n};\n\n/**\n * If a value could have properties, and has none, this function is called,\n * which returns a string representation of the empty value.\n *\n * Functions w/ no properties return `'[Function]'`\n * Arrays w/ length === 0 return `'[]'`\n * Objects w/ no properties return `'{}'`\n * All else: return result of `value.toString()`\n *\n * @api private\n * @param {*} value The value to inspect.\n * @param {string} typeHint The type of the value\n * @returns {string}\n */\nfunction emptyRepresentation(value, typeHint) {\n  switch (typeHint) {\n    case 'function':\n      return '[Function]';\n    case 'object':\n      return '{}';\n    case 'array':\n      return '[]';\n    default:\n      return value.toString();\n  }\n}\n\n/**\n * Takes some variable and asks `Object.prototype.toString()` what it thinks it\n * is.\n *\n * @api private\n * @see https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/toString\n * @param {*} value The value to test.\n * @returns {string} Computed type\n * @example\n * type({}) // 'object'\n * type([]) // 'array'\n * type(1) // 'number'\n * type(false) // 'boolean'\n * type(Infinity) // 'number'\n * type(null) // 'null'\n * type(new Date()) // 'date'\n * type(/foo/) // 'regexp'\n * type('type') // 'string'\n * type(global) // 'global'\n * type(new String('foo') // 'object'\n */\nvar type = exports.type = function type(value) {\n  if (value === undefined) {\n    return 'undefined';\n  } else if (value === null) {\n    return 'null';\n  } else if (typeof Buffer !== 'undefined' && Buffer.isBuffer(value)) {\n    return 'buffer';\n  }\n  return Object.prototype.toString.call(value)\n    .replace(/^\\[.+\\s(.+?)\\]$/, '$1')\n    .toLowerCase();\n};\n\n/**\n * Stringify `value`. Different behavior depending on type of value:\n *\n * - If `value` is undefined or null, return `'[undefined]'` or `'[null]'`, respectively.\n * - If `value` is not an object, function or array, return result of `value.toString()` wrapped in double-quotes.\n * - If `value` is an *empty* object, function, or array, return result of function\n *   {@link emptyRepresentation}.\n * - If `value` has properties, call {@link exports.canonicalize} on it, then return result of\n *   JSON.stringify().\n *\n * @api private\n * @see exports.type\n * @param {*} value\n * @return {string}\n */\nexports.stringify = function(value) {\n  var typeHint = type(value);\n\n  if (!~indexOf(['object', 'array', 'function'], typeHint)) {\n    if (typeHint === 'buffer') {\n      var json = value.toJSON();\n      // Based on the toJSON result\n      return jsonStringify(json.data && json.type ? json.data : json, 2)\n        .replace(/,(\\n|$)/g, '$1');\n    }\n\n    // IE7/IE8 has a bizarre String constructor; needs to be coerced\n    // into an array and back to obj.\n    if (typeHint === 'string' && typeof value === 'object') {\n      value = reduce(value.split(''), function(acc, char, idx) {\n        acc[idx] = char;\n        return acc;\n      }, {});\n      typeHint = 'object';\n    } else {\n      return jsonStringify(value);\n    }\n  }\n\n  for (var prop in value) {\n    if (Object.prototype.hasOwnProperty.call(value, prop)) {\n      return jsonStringify(exports.canonicalize(value, null, typeHint), 2).replace(/,(\\n|$)/g, '$1');\n    }\n  }\n\n  return emptyRepresentation(value, typeHint);\n};\n\n/**\n * like JSON.stringify but more sense.\n *\n * @api private\n * @param {Object}  object\n * @param {number=} spaces\n * @param {number=} depth\n * @returns {*}\n */\nfunction jsonStringify(object, spaces, depth) {\n  if (typeof spaces === 'undefined') {\n    // primitive types\n    return _stringify(object);\n  }\n\n  depth = depth || 1;\n  var space = spaces * depth;\n  var str = isArray(object) ? '[' : '{';\n  var end = isArray(object) ? ']' : '}';\n  var length = typeof object.length === 'number' ? object.length : exports.keys(object).length;\n  // `.repeat()` polyfill\n  function repeat(s, n) {\n    return new Array(n).join(s);\n  }\n\n  function _stringify(val) {\n    switch (type(val)) {\n      case 'null':\n      case 'undefined':\n        val = '[' + val + ']';\n        break;\n      case 'array':\n      case 'object':\n        val = jsonStringify(val, spaces, depth + 1);\n        break;\n      case 'boolean':\n      case 'regexp':\n      case 'symbol':\n      case 'number':\n        val = val === 0 && (1 / val) === -Infinity // `-0`\n          ? '-0'\n          : val.toString();\n        break;\n      case 'date':\n        var sDate;\n        if (isNaN(val.getTime())) { // Invalid date\n          sDate = val.toString();\n        } else {\n          sDate = val.toISOString ? val.toISOString() : toISOString(val);\n        }\n        val = '[Date: ' + sDate + ']';\n        break;\n      case 'buffer':\n        var json = val.toJSON();\n        // Based on the toJSON result\n        json = json.data && json.type ? json.data : json;\n        val = '[Buffer: ' + jsonStringify(json, 2, depth + 1) + ']';\n        break;\n      default:\n        val = (val === '[Function]' || val === '[Circular]')\n          ? val\n          : JSON.stringify(val); // string\n    }\n    return val;\n  }\n\n  for (var i in object) {\n    if (!Object.prototype.hasOwnProperty.call(object, i)) {\n      continue; // not my business\n    }\n    --length;\n    str += '\\n ' + repeat(' ', space)\n      + (isArray(object) ? '' : '\"' + i + '\": ') // key\n      + _stringify(object[i])                     // value\n      + (length ? ',' : '');                     // comma\n  }\n\n  return str\n    // [], {}\n    + (str.length !== 1 ? '\\n' + repeat(' ', --space) + end : end);\n}\n\n/**\n * Test if a value is a buffer.\n *\n * @api private\n * @param {*} value The value to test.\n * @return {boolean} True if `value` is a buffer, otherwise false\n */\nexports.isBuffer = function(value) {\n  return typeof Buffer !== 'undefined' && Buffer.isBuffer(value);\n};\n\n/**\n * Return a new Thing that has the keys in sorted order. Recursive.\n *\n * If the Thing...\n * - has already been seen, return string `'[Circular]'`\n * - is `undefined`, return string `'[undefined]'`\n * - is `null`, return value `null`\n * - is some other primitive, return the value\n * - is not a primitive or an `Array`, `Object`, or `Function`, return the value of the Thing's `toString()` method\n * - is a non-empty `Array`, `Object`, or `Function`, return the result of calling this function again.\n * - is an empty `Array`, `Object`, or `Function`, return the result of calling `emptyRepresentation()`\n *\n * @api private\n * @see {@link exports.stringify}\n * @param {*} value Thing to inspect.  May or may not have properties.\n * @param {Array} [stack=[]] Stack of seen values\n * @param {string} [typeHint] Type hint\n * @return {(Object|Array|Function|string|undefined)}\n */\nexports.canonicalize = function canonicalize(value, stack, typeHint) {\n  var canonicalizedObj;\n  /* eslint-disable no-unused-vars */\n  var prop;\n  /* eslint-enable no-unused-vars */\n  typeHint = typeHint || type(value);\n  function withStack(value, fn) {\n    stack.push(value);\n    fn();\n    stack.pop();\n  }\n\n  stack = stack || [];\n\n  if (indexOf(stack, value) !== -1) {\n    return '[Circular]';\n  }\n\n  switch (typeHint) {\n    case 'undefined':\n    case 'buffer':\n    case 'null':\n      canonicalizedObj = value;\n      break;\n    case 'array':\n      withStack(value, function() {\n        canonicalizedObj = exports.map(value, function(item) {\n          return exports.canonicalize(item, stack);\n        });\n      });\n      break;\n    case 'function':\n      /* eslint-disable guard-for-in */\n      for (prop in value) {\n        canonicalizedObj = {};\n        break;\n      }\n      /* eslint-enable guard-for-in */\n      if (!canonicalizedObj) {\n        canonicalizedObj = emptyRepresentation(value, typeHint);\n        break;\n      }\n    /* falls through */\n    case 'object':\n      canonicalizedObj = canonicalizedObj || {};\n      withStack(value, function() {\n        exports.forEach(exports.keys(value).sort(), function(key) {\n          canonicalizedObj[key] = exports.canonicalize(value[key], stack);\n        });\n      });\n      break;\n    case 'date':\n    case 'number':\n    case 'regexp':\n    case 'boolean':\n    case 'symbol':\n      canonicalizedObj = value;\n      break;\n    default:\n      canonicalizedObj = value + '';\n  }\n\n  return canonicalizedObj;\n};\n\n/**\n * Lookup file names at the given `path`.\n *\n * @api public\n * @param {string} path Base path to start searching from.\n * @param {string[]} extensions File extensions to look for.\n * @param {boolean} recursive Whether or not to recurse into subdirectories.\n * @return {string[]} An array of paths.\n */\nexports.lookupFiles = function lookupFiles(path, extensions, recursive) {\n  var files = [];\n  var re = new RegExp('\\\\.(' + extensions.join('|') + ')$');\n\n  if (!exists(path)) {\n    if (exists(path + '.js')) {\n      path += '.js';\n    } else {\n      files = glob.sync(path);\n      if (!files.length) {\n        throw new Error(\"cannot resolve path (or pattern) '\" + path + \"'\");\n      }\n      return files;\n    }\n  }\n\n  try {\n    var stat = statSync(path);\n    if (stat.isFile()) {\n      return path;\n    }\n  } catch (err) {\n    // ignore error\n    return;\n  }\n\n  readdirSync(path).forEach(function(file) {\n    file = join(path, file);\n    try {\n      var stat = statSync(file);\n      if (stat.isDirectory()) {\n        if (recursive) {\n          files = files.concat(lookupFiles(file, extensions, recursive));\n        }\n        return;\n      }\n    } catch (err) {\n      // ignore error\n      return;\n    }\n    if (!stat.isFile() || !re.test(file) || basename(file)[0] === '.') {\n      return;\n    }\n    files.push(file);\n  });\n\n  return files;\n};\n\n/**\n * Generate an undefined error with a message warning the user.\n *\n * @return {Error}\n */\n\nexports.undefinedError = function() {\n  return new Error('Caught undefined error, did you throw without specifying what?');\n};\n\n/**\n * Generate an undefined error if `err` is not defined.\n *\n * @param {Error} err\n * @return {Error}\n */\n\nexports.getError = function(err) {\n  return err || exports.undefinedError();\n};\n\n/**\n * @summary\n * This Filter based on `mocha-clean` module.(see: `github.com/rstacruz/mocha-clean`)\n * @description\n * When invoking this function you get a filter function that get the Error.stack as an input,\n * and return a prettify output.\n * (i.e: strip Mocha and internal node functions from stack trace).\n * @returns {Function}\n */\nexports.stackTraceFilter = function() {\n  // TODO: Replace with `process.browser`\n  var is = typeof document === 'undefined' ? { node: true } : { browser: true };\n  var slash = path.sep;\n  var cwd;\n  if (is.node) {\n    cwd = process.cwd() + slash;\n  } else {\n    cwd = (typeof location === 'undefined' ? window.location : location).href.replace(/\\/[^\\/]*$/, '/');\n    slash = '/';\n  }\n\n  function isMochaInternal(line) {\n    return (~line.indexOf('node_modules' + slash + 'mocha' + slash))\n      || (~line.indexOf('node_modules' + slash + 'mocha.js'))\n      || (~line.indexOf('bower_components' + slash + 'mocha.js'))\n      || (~line.indexOf(slash + 'mocha.js'));\n  }\n\n  function isNodeInternal(line) {\n    return (~line.indexOf('(timers.js:'))\n      || (~line.indexOf('(events.js:'))\n      || (~line.indexOf('(node.js:'))\n      || (~line.indexOf('(module.js:'))\n      || (~line.indexOf('GeneratorFunctionPrototype.next (native)'))\n      || false;\n  }\n\n  return function(stack) {\n    stack = stack.split('\\n');\n\n    stack = reduce(stack, function(list, line) {\n      if (isMochaInternal(line)) {\n        return list;\n      }\n\n      if (is.node && isNodeInternal(line)) {\n        return list;\n      }\n\n      // Clean up cwd(absolute)\n      if (/\\(?.+:\\d+:\\d+\\)?$/.test(line)) {\n        line = line.replace(cwd, '');\n      }\n\n      list.push(line);\n      return list;\n    }, []);\n\n    return stack.join('\\n');\n  };\n};\n\n/**\n * Crude, but effective.\n * @api\n * @param {*} value\n * @returns {boolean} Whether or not `value` is a Promise\n */\nexports.isPromise = function isPromise(value) {\n  return typeof value === 'object' && typeof value.then === 'function';\n};\n"]}