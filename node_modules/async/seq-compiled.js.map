{"version":3,"sources":["seq.js"],"names":[],"mappings":"AAAA;;AAEA,OAAO,cAAP,CAAsB,OAAtB,EAA+B,YAA/B,EAA6C;AACzC,WAAO;AADkC,CAA7C;;AAIA,IAAI,QAAQ,QAAQ,aAAR,CAAZ;;AAEA,IAAI,SAAS,uBAAuB,KAAvB,CAAb;;AAEA,IAAI,QAAQ,QAAQ,aAAR,CAAZ;;AAEA,IAAI,SAAS,uBAAuB,KAAvB,CAAb;;AAEA,IAAI,UAAU,QAAQ,UAAR,CAAd;;AAEA,IAAI,WAAW,uBAAuB,OAAvB,CAAf;;AAEA,SAAS,sBAAT,CAAgC,GAAhC,EAAqC;AAAE,WAAO,OAAO,IAAI,UAAX,GAAwB,GAAxB,GAA8B,EAAE,SAAS,GAAX,EAArC;AAAwD;;AAE/F;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAsCA,QAAQ,OAAR,GAAkB,CAAC,GAAG,OAAO,OAAX,EAAoB,SAAS,GAAT,CAAa,SAAb,EAAwB;AAC1D,WAAO,CAAC,GAAG,OAAO,OAAX,EAAoB,UAAU,IAAV,EAAgB;AACvC,YAAI,OAAO,IAAX;;AAEA,YAAI,KAAK,KAAK,KAAK,MAAL,GAAc,CAAnB,CAAT;AACA,YAAI,OAAO,EAAP,IAAa,UAAjB,EAA6B;AACzB,iBAAK,GAAL;AACH,SAFD,MAEO;AACH,iBAAK,OAAO,OAAZ;AACH;;AAED,SAAC,GAAG,SAAS,OAAb,EAAsB,SAAtB,EAAiC,IAAjC,EAAuC,UAAU,OAAV,EAAmB,EAAnB,EAAuB,EAAvB,EAA2B;AAC9D,eAAG,KAAH,CAAS,IAAT,EAAe,QAAQ,MAAR,CAAe,CAAC,CAAC,GAAG,OAAO,OAAX,EAAoB,UAAU,GAAV,EAAe,QAAf,EAAyB;AACxE,mBAAG,GAAH,EAAQ,QAAR;AACH,aAF8B,CAAD,CAAf,CAAf;AAGH,SAJD,EAIG,UAAU,GAAV,EAAe,OAAf,EAAwB;AACvB,eAAG,KAAH,CAAS,IAAT,EAAe,CAAC,GAAD,EAAM,MAAN,CAAa,OAAb,CAAf;AACH,SAND;AAOH,KAjBM,CAAP;AAkBH,CAnBiB,CAAlB;AAoBA,OAAO,OAAP,GAAiB,QAAQ,SAAR,CAAjB","file":"seq-compiled.js","sourcesContent":["'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _noop = require('lodash/noop');\n\nvar _noop2 = _interopRequireDefault(_noop);\n\nvar _rest = require('lodash/rest');\n\nvar _rest2 = _interopRequireDefault(_rest);\n\nvar _reduce = require('./reduce');\n\nvar _reduce2 = _interopRequireDefault(_reduce);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n/**\n * Version of the compose function that is more natural to read. Each function\n * consumes the return value of the previous function. It is the equivalent of\n * [compose]{@link module:ControlFlow.compose} with the arguments reversed.\n *\n * Each function is executed with the `this` binding of the composed function.\n *\n * @name seq\n * @static\n * @memberOf module:ControlFlow\n * @method\n * @see [async.compose]{@link module:ControlFlow.compose}\n * @category Control Flow\n * @param {...Function} functions - the asynchronous functions to compose\n * @returns {Function} a function that composes the `functions` in order\n * @example\n *\n * // Requires lodash (or underscore), express3 and dresende's orm2.\n * // Part of an app, that fetches cats of the logged user.\n * // This example uses `seq` function to avoid overnesting and error\n * // handling clutter.\n * app.get('/cats', function(request, response) {\n *     var User = request.models.User;\n *     async.seq(\n *         _.bind(User.get, User),  // 'User.get' has signature (id, callback(err, data))\n *         function(user, fn) {\n *             user.getCats(fn);      // 'getCats' has signature (callback(err, data))\n *         }\n *     )(req.session.user_id, function (err, cats) {\n *         if (err) {\n *             console.error(err);\n *             response.json({ status: 'error', message: err.message });\n *         } else {\n *             response.json({ status: 'ok', message: 'Cats found', data: cats });\n *         }\n *     });\n * });\n */\nexports.default = (0, _rest2.default)(function seq(functions) {\n    return (0, _rest2.default)(function (args) {\n        var that = this;\n\n        var cb = args[args.length - 1];\n        if (typeof cb == 'function') {\n            args.pop();\n        } else {\n            cb = _noop2.default;\n        }\n\n        (0, _reduce2.default)(functions, args, function (newargs, fn, cb) {\n            fn.apply(that, newargs.concat([(0, _rest2.default)(function (err, nextargs) {\n                cb(err, nextargs);\n            })]));\n        }, function (err, results) {\n            cb.apply(that, [err].concat(results));\n        });\n    });\n});\nmodule.exports = exports['default'];"]}